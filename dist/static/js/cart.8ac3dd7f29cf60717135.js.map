{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/cartService.js","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js"],"names":["url","hotLists","banner","topList","subList","rank","searchList","details","deal","addCart","cartLists","cartReduce","cartRemove","cartMrremove","addressAdd","addressRemove","addressList","addressUpdate","addressSetDefault","key","hasOwnProperty","Cart","id","fetch","number","startX","endX","Vue","el","data","lists","total","editingShop","editingShopIndex","removePopup","removeData","removeMsg","computed","allSelected","get","this","length","every","shop","checked","set","newVal","forEach","goodsList","good","allRemoveSelected","removeChecked","selectLists","arr","push","price","removeLists","created","getList","methods","_this","axios","then","res","cartList","editing","editingMsg","selectGood","attr","selectShop","selectAll","edit","shopIndex","_this2","item","i","$refs","style","transform","add","reduce","remove","goodIndex","removeList","removeConfirm","_this3","_removeData","splice","removeShop","ids","post","findIndex","start","e","changedTouches","clientX","end","ele","filters","numFilter","toFixed","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","reject","status","location","href","catch","error"],"mappings":"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","file":"static/js/cart.8ac3dd7f29cf60717135.js","sourcesContent":["let url = {\n    hotLists:'/index/hotLists',\n    banner:'/index/banner',\n    topList:'/category/topList',\n    subList:'/category/subList',\n    rank:'/category/rank',\n    searchList:'/search/list',\n    details:'/goods/details',\n    deal:'/goods/deal',\n    addCart:'/cart/add',\n    cartLists:'/cart/list',\n    cartReduce:'/cart/reduce',\n    cartRemove:'/cart/remove',\n    cartMrremove:'/cart/mrremove',\n    addressAdd:'/address/add',\n    addressRemove:'/address/remove',\n    addressList:'/address/list',\n    addressUpdate:'/address/update',\n    addressSetDefault:'/address/setDefault'\n\n}\n// let host = 'http://rap2api.taobao.org/app/mock/7058'\nlet host = 'https://easy-mock.com/mock/5cdf9e46ca410e607a1193b3/youzan'\n\n\nfor (let key in url) {\n    if (url.hasOwnProperty(key)){\n        url[key] = host + url[key]\n    }\n}\n\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import fetch from 'js/fetch.js'\nimport url from 'js/api.js'\n\nclass Cart{\n  static add(id){\n    return fetch(url.addCart,{\n      id,\n      number:1\n    })\n  }\n  static reduce(id){\n    return fetch(url.cartReduce,{\n      id,\n      number:1\n    })\n  }\n}\n\nexport default Cart \n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js","import './cart_base.css'\nimport './cart_trade.css'\nimport './cart.css'\n\nimport Vue from 'vue'\nimport axios from 'axios'\nimport url from 'js/api.js'\nimport Velocity from 'velocity-animate'\nimport Cart from 'js/cartService.js'\nimport fetch from 'js/fetch.js'\n\nlet startX = 0;\nlet endX = 0;\n\nnew Vue({\n  el:'.container',\n  data:{\n    lists:null,\n    total:0,\n    editingShop:null,\n    editingShopIndex:-1,\n    removePopup:false,\n    removeData:null,\n    removeMsg:'',\n  },\n  computed:{\n    allSelected:{ // allSelected正常情况下全选\n      get(){      //判断店铺进而判断全选状态\n        if(this.lists&&this.lists.length){\n          return this.lists.every(shop=>{  //判断店铺的checked\n            return shop.checked\n          })\n        }\n        return false\n      },\n      set(newVal){  //全选状态决定店铺和商品状态\n        this.lists.forEach(shop=>{\n          shop.checked = newVal\n          shop.goodsList.forEach(good=>{\n            good.checked = newVal\n          })\n        })\n      }\n    },\n    allRemoveSelected:{\n      get(){\n        if(this.editingShop){\n          return this.editingShop.removeChecked\n        }\n        return false\n      },\n      set(newVal){\n        if(this.editingShop){\n          this.editingShop.removeChecked = newVal\n          this.editingShop.goodsList.forEach(good=>{\n            good.removeChecked = newVal\n          })\n        }\n      }\n    },\n    // 这是为了之后准备\n    selectLists(){  //selectLists正常情况选中的商品列表\n      if(this.lists&&this.lists.length){\n        let arr = []\n        let total  = 0\n        this.lists.forEach(shop=>{\n          shop.goodsList.forEach(good=>{\n            if(good.checked){\n              arr.push(good)\n              total += good.price * good.number\n            }\n          })\n        })\n        this.total = total\n        return arr\n      }\n      return []\n    }, \n    removeLists(){ //编辑情况下商品选中--要删除的商品列表\n      if(this.editingShop){\n        let arr = []\n        this.editingShop.goodsList.forEach(good=>{\n          if(good.removeChecked){\n            arr.push(good)\n          }\n        })\n        return arr\n      }\n      return []\n    },\n  },\n  created(){\n    this.getList()\n  },\n  methods:{\n    getList(){\n      axios.get(url.cartLists).then(res => {\n        let lists = res.data.cartList\n        lists.forEach(shop=>{\n          shop.checked = true\n          shop.removeChecked = false\n          shop.editing = false\n          shop.editingMsg = '编辑'\n          shop.goodsList.forEach(good=>{\n            good.checked = true\n            good.removeChecked = false\n          })\n        })\n        this.lists = lists\n      })\n    },\n    selectGood(shop,good){\n      let attr = this.editingShop ? 'removeChecked' : 'checked' //判断是在编辑还是正常状态下 \n      good[attr] = !good[attr]\n      shop[attr] = shop.goodsList.every(good=>{\n        return good[attr]\n      })\n    },\n    selectShop(shop){\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\n      shop[attr] = !shop[attr]\n      shop.goodsList.forEach(good=>{\n        good[attr] = shop[attr]\n      })\n    },\n    selectAll(){\n      let attr = this.editingShop ? 'allRemoveSelected' : 'allSelected' //allRemoveSelected默认是false，当点击selctAll取反了 变成true\n      this[attr] = !this[attr]\n    },\n    //正常状态和编辑状态的切换\n    edit(shop,shopIndex){\n      shop.editing = !shop.editing\n      shop.editingMsg = shop.editing ? '完成':'编辑'\n      this.lists.forEach((item,i)=>{\n        item.goodsList.forEach(good=>{\n          let ele = this.$refs[`goods-${good.id}`][0]\n\t\t\t\t\tele.style.transform = 'translateX(0)';\n        })\n        if(shopIndex !== i){\n          item.editing = false\n          item.editingMsg = shop.editing ? '':'编辑'  \n        }\n      })\n      this.editingShop = shop.editing ? shop : null\n      this.editingShopIndex = shop.editing ? shopIndex : -1\n      \n    },\n    add(good){\n      // axios.post(url.addCart,{\n      //   id:good.id,\n      //   number:1\n      // }).then(res=>{\n      //   good.number++\n      // })\n      Cart.add(good.id).then(res=>{\n        good.number++\n      })\n    },\n    reduce(good){\n      // if(good.number===1)return\n      // axios.post(url.cartReduce,{\n      //   id:good.id,\n      //   number:1\n      // }).then(res=>{\n      //   good.number--\n      // })\n      if(good.number===1)return\n      good.number--\n\n    },\n    //单删\n    remove(shop,shopIndex,good,goodIndex){\n      this.removePopup = true\n      this.removeData = {shop,shopIndex,good,goodIndex}\n      this.removeMsg = '确定要删除该商品吗？'\n    },\n    //删除多个\n    removeList(){\n      this.removePopup = true\n      this.removeMsg = `确定将所选${this.removeLists.length}个商品删除？`\n    },\n    removeConfirm(){\n      if(this.removeMsg === '确定要删除该商品吗？'){\n        let {shop,shopIndex,good,goodIndex} = this.removeData\n        fetch(url.cartRemove,{\n          id:good.id\n        }).then(res=>{\n          shop.goodsList.splice(goodIndex,1)\n          if(!shop.goodsList.length){\n            this.lists.splice(shopIndex,1)\n            this.removeShop()\n          }\n          this.removePopup = false\n          let ele = this.$refs[`goods-${good.id}`][0]\n          ele.style.transform = 'translateX(0)'\n        })\n      }else{\n        let ids = []\n        this.removeLists.forEach(good=>{\n          ids.push(good.id)\n        })\n        axios.post(url.cartMrremove,{\n          ids\n        }).then(res=>{\n          let arr = []\n          this.editingShop.goodsList.forEach(good=>{\n            let index = this.removeLists.findIndex(item=>{\n              return item.id == good.id \n            })\n            if(index === -1){\n              arr.push(good)\n            }\n          })\n          if(arr.length){\n            this.editingShop.goodsList = arr\n          }else{\n            this.lists.splice(this.editingShopIndex,1)\n            this.removeShop()\n          }\n          this.removePopup = false\n        })\n      }\n    },\n    removeShop(){\n      this.editingShop = null,\n      this.editingShopIndex = -1,\n      this.lists.forEach(shop=>{\n        shop.editing = false\n        shop.editingMsg = '编辑'\n      })\n    },\n    start(e){\n       startX = e.changedTouches[0].clientX\n    },\n    end(e,good){\n      endX = e.changedTouches[0].clientX\n      if(!this.editingShop){ //不是在编辑状态才能执行这个\n        let ele = this.$refs[`goods-${good.id}`][0]\n        if(startX - endX > 100){\n          ele.style.transform = 'translateX(-60px)'\n        }else if(endX - startX> 100){\n          ele.style.transform = 'translateX(0)'\n        }\n      }\n    }\n  },\n  filters:{\n    numFilter(price){\n      return price.toFixed(2)\n    }\n  },\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\n\nfunction fetch(url,data){\n  return new Promise((resolve,reject)=>{\n    axios.post(url,data).then(res=>{\n      let status = res.data.status\n      if(status === 200){\n        resolve(res)\n      }\n      if(status === 300){\n        location.href = 'login.html'\n        resolve(res)\n      }\n      resolve(res)\n    }).catch(error=>{\n      reject(error)\n    })\n  })\n}\n\nexport default fetch\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js"],"sourceRoot":""}